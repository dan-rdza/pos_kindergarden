{% extends 'base.html' %}
{% block content %}
<h2>Nueva Venta</h2>
<form method="post">
  <div class="grid">
    <input name="seller" placeholder="Vendedor" value="Mostrador">
    <input name="customer" placeholder="Cliente" value="Cliente Mostrador">
  </div>
  <table>
    <thead><tr><th>SKU</th><th>Descripción (catálogo)</th><th>Cantidad</th><th>P.Unit</th></tr></thead>
    <tbody>
    {% for i in range(1, 11) %}
      <tr>
        <td>
          <select name="sku_{{i}}">
            <option value="">--</option>
            {% for p in prods %}
            <option value="{{ p.sku }}">{{ p.sku }}</option>
            {% endfor %}
          </select>
        </td>
        <td>
          <select onchange="this.closest('tr').querySelector('select[name=sku_{{i}}]').value=this.value.split(' | ')[0]" style="min-width:260px;">
            <option>-- catálogo --</option>
            {% for p in prods %}
            <option>{{ p.sku }} | {{ p.description }} | ${{ '%.2f'|format(p.price) }}</option>
            {% endfor %}
          </select>
        </td>
        <td><input name="qty_{{i}}" type="number" step="1" min="0"></td>
        <td><input name="price_{{i}}" type="number" step="0.5" min="0"></td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
  <button type="submit">Guardar Venta</button>
</form>
{% endblock %}
